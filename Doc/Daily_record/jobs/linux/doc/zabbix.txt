一.Zabbix监控系统部署
	1.实验准备
		1.1.运行centos_init.sh初始化脚本.进行新系统的初始化.安装必备的软件及阿里云镜像源的替换.

		1.2.centos7.6系统服务器3台,一台作为监控服务器,两台作为被监控节点,配置好yum源,防火墙关闭,
	各节点时钟服务同步,各节点之间可以通过主机名相互通信.
		设置各主机的主机名,并在/etc/hosts中进行解析,例如(zabbix为zabbix服务器主机名;
		fw为node1主机名;docker1为node2主机名;该配置在三台服务器都要配置):
		192.168.0.202   zabbix
		192.168.0.203   fw
		192.168.0.204   docker1


	1.1.所有机器关闭防火墙和selinux
		关闭selinux:
			setenforce 0
			sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config
		
		关闭防火墙:
			systemctl stop firewalld.service

	1.2.实验服务器配置
	
		机器名称			IP配置				服务角色		备注
		server			192.168.0.202		  zabbix-server		开启
		node1			192.168.0.203		  zabbix-agent		开启
		node2			192.168.0.204		  zabbix-agent		开启
	
	2.Zabbix的安装(3台服务器都要安装)

		1)更新yum仓库

		1.1.下载yum仓库(下载zabbix(4.4.1)rpm包,系统版本为cento7).
		命令:
			yum -y install wget
			wget https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm

			在阿里镜像https://developer.aliyun.com/mirror/zabbix/中的
			下载地址https://mirrors.aliyun.com/zabbix/中找到对应的rpm包
			(网址为:https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.26967be43QWQSR
			链接地址为:https://mirrors.aliyun.com/zabbix/zabbix/4.4/rhel/7/x86_64/zabbix-release-4.4-1.el7.noarch.rpm).
		
		1.2.安装yum仓库
			rpm -ivh zabbix-release-4.4-1.el7.noarch.rpm

		1.3.将源更改为aliyun.
			sed -i 's/repo.zabbix.com/mirrors.aliyun.com\/zabbix/g' /etc/yum.repos.d/zabbix.repo
		
		1.4.更新yum仓库
			yum repolist

		1.5.安装Zabbix
		
			yum -y install epel-release.noarch
			yum -y install zabbix-agent zabbix-get zabbix-sender zabbix-server-mysql zabbix-web zabbix-web-mysql php-mysql
		
		2)安装设置数据库
		
		1.1.创建mariadb.repo
			vim /etc/yum.repos.d/mariadb.repo
			写入以下内容:

			[mariadb]
			name = MariaDB
			# rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.
			# baseurl = https://rpm.mariadb.org/10.4/centos/$releasever/$basearch
			baseurl = https://mirrors.aliyun.com/mariadb/yum/10.4/centos/$releasever/$basearch
			module_hotfixes = 1
			# gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB
			gpgkey = https://mirrors.aliyun.com/mariadb/yum/RPM-GPG-KEY-MariaDB
			gpgcheck = 1

		1.2.yum安装最新版本mariadb
			yum install -y MariaDB-server MariaDB-client
	
		1.3.修改配置文件
			vim /etc/my.cnf.d/server.cnf

			[mysqld]
			skip_name_resolve = ON
			innodb_file_per_table = ON
			innodb_buffer_pool_size = 256M
			max_connections = 2000
			log-bin = master-log
		
		1.4.重启数据库服务
			#重启mariadb
			systemctl restart mariadb
			#初始化mariadb
			mysql_secure_installation
